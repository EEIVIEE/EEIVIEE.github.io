# Website Setup & Deployment Guide

## Problem Summary
When you have JavaScript files with ES6 imports (like `import { gsap } from "gsap"`), browsers can't resolve them directly. You need a **bundler** (Vite) to compile everything into browser-ready files.

---

## Step-by-Step Solution

### **Step 1: Project Setup**

1. Initialize npm (if not already done):
```bash
npm init -y
```

2. Install dependencies:
```bash
npm install vite gsap three lenis
npm install --save-dev sass-embedded
```

3. Update `package.json` scripts:
```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "type": "module"
}
```

---

### **Step 2: Create Vite Configuration**

Create `vite.config.js`:
```javascript
import { defineConfig } from 'vite'

export default defineConfig({
  base: './',  // CRITICAL: Use relative paths for GitHub Pages
  build: {
    outDir: 'docs',  // Build to docs folder (GitHub Pages native)
    emptyOutDir: true,
    rollupOptions: {
      input: {
        main: 'index.html',
        projects: 'projects.html',  // Add all your HTML files
      },
    },
  },
  server: {
    port: 5173,
    open: true,
  },
})
```

**Key points:**
- `base: './'` - Makes paths relative (not absolute `/`)
- `outDir: 'docs'` - GitHub Pages has built-in support for `/docs`

---

### **Step 3: Update `.gitignore`**

```ignore
node_modules
docs-ssr
*.local
```

**Important:** Do NOT ignore the `docs` folder - it needs to be tracked!

---

### **Step 4: Build Locally**

Before deploying, always test locally:

```bash
npm run build
```

This creates a `/docs` folder with:
- `index.html` (with bundled script references)
- `assets/` folder (bundled JavaScript and CSS)
- `projects.html` (bundled)
- Copied images and other assets

---

### **Step 5: Commit & Push to GitHub**

```bash
git add -A
git commit -m "Build and deploy site"
git push origin main
```

---

### **Step 6: Configure GitHub Pages**

1. Go to your repo: `https://github.com/USERNAME/REPO`
2. **Settings** → **Pages**
3. Under "Build and deployment":
   - Source: **Deploy from a branch**
   - Branch: `main`
   - Folder: `/docs`
4. Click **Save**

Your site will be live in ~30 seconds!

---

## Workflow for Updates

### **To Update Your Site:**

1. **Make changes** to your source files:
   - Edit `script.js`, `projects.html`, `style.css`, etc.

2. **Rebuild locally:**
   ```bash
   npm run build
   ```

3. **Test locally** (optional):
   ```bash
   npm run preview
   ```
   Then visit `http://localhost:4173`

4. **Commit and push:**
   ```bash
   git add -A
   git commit -m "Update: [describe changes]"
   git push origin main
   ```

5. **Wait 30 seconds** - GitHub Pages auto-deploys

---

## Troubleshooting

### ❌ Error: "Failed to resolve module specifier 'three'"
**Solution:** Make sure you ran `npm run build` and pushed the `/docs` folder

### ❌ Old version still showing
**Solution:** Hard refresh browser
- Windows/Linux: `Ctrl + Shift + R`
- Mac: `Cmd + Shift + R`

### ❌ Can't find `/docs` folder in GitHub Pages settings
**Solution:** Verify the folder exists on GitHub:
1. Go to your repo Code tab
2. You should see a `docs` folder listed
3. If not, run `npm run build` and push again

### ❌ Assets loading from wrong path
**Solution:** Check that `vite.config.js` has `base: './'`

---

## File Structure

After following this guide, your project should look like:

```
project-folder/
├── docs/              (Generated by `npm run build`)
│   ├── assets/
│   ├── index.html
│   ├── projects.html
│   └── ...
├── src/               (Your source files)
├── images/
├── index.html         (Source template)
├── projects.html      (Source template)
├── script.js          (Source - with ES6 imports)
├── vite.config.js     (Vite configuration)
├── package.json
└── .gitignore
```

---

## Quick Reference Commands

| Task | Command |
|------|---------|
| Develop locally | `npm run dev` |
| Build for deployment | `npm run build` |
| Preview built site | `npm run preview` |
| Create new project | `npm init -y && npm install vite gsap three lenis` |
| Push to GitHub | `git add -A && git commit -m "message" && git push origin main` |

---

## Key Takeaways

1. **Always use a bundler** (Vite) for ES6 modules
2. **Build to `/docs`** folder - GitHub Pages native support
3. **Use relative paths** (`base: './'` in Vite config)
4. **Rebuild before deploying** - never manually edit `/docs`
5. **Push the `/docs` folder** - it must be tracked in git
